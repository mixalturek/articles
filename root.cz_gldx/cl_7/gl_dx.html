<?xml version="1.0" encoding="ISO-8859-2"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cz" lang="CZ">
<head>

<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2" />
<meta http-equiv="content-language" content="cs" />
<meta http-equiv="content-script-type" content="text/javascript" />
<meta http-equiv="content-style-type" content="text/css" />

<meta name="robots" content="all, follow" />
<meta name="resource-type" content="document" />

<meta name="description" content="Porovnání 3D grafických knihoven OpenGL a Direct3D" />
<meta name="keywords" content="opengl, gl, directx, dx, direct3d, d3d, 3d, grafika" />
<meta name="author" content="all: Michal Turek - Woq; woq (zavináè) seznam.cz" />
<meta name="copyright" content="Copyright (c) 2004 Michal Turek - Woq" /><!-- Ne¾ to vyjde na root.cz :-] -->

<title>OpenGL a Direct3D VII.</title>

<link href="style.css" rel="stylesheet" type="text/css" media="all" />
<link href="print.css" rel="stylesheet" type="text/css" media="print" />

</head>
<body>

<div id="text_stranky">

<h1>OpenGL a Direct3D VII.</h1>

<p id="uvod">V posledním díle seriálu, abyste neøekli, ¾e Direct3D kritizuji jen já sám, uvedu citaci jednoho (témìø profesionálního) vývojáøe her, který narozdíl ode mì, má s DirectX spoustu praktických zku¹eností a asi ví, o èem mluví. Dále se podíváme na projekt Fahrenheit a struènì si popí¹eme, jak se portují Windows programy do jiných systémù.</p>


<h3>Citace (ne)profesionála</h3>

<p>Bernard Lidický, který vede jeden z nejstar¹ích free-vývojových týmù v ÈR - <a href="http://hippo.nipax.cz/" target="_blank">Hippo Games</a>, byl pro mì v¾dy programátorským a Linuxovým GURU. Právì on mì opravdu dostal k Linuxu - pøed tím to byly jen takové krátkodobé pokusy. Ale proè to sem pí¹u, pøed èasem mi poslal èlánek o tvorbì poèítaèových her <a href="#literatura">[4]</a>. O DirectX v nìm pí¹e, cituji:</p>

<i>
<p>Dùvody proè ne DirectX</p>

<ul>
<li>API se mi zdá pøíli¹ komplikované a zabere hodnì èasu se nauèit s ním pracovat.</li>
<li>Je potøeba napsat hodnì kódu, aby program vùbec nìco dìlal.</li>
<li>API se èasto mìní. A mìní se tak, ¾e není zpìtnì kompatibilní. Tedy nová verze znamená nové ponoøení se do manuálù a pøepisování programu. Je otázka, zda je vývoj opravdu tak rychlý, nebo je API tak nevhodnì navr¾ené, ¾e se musí s ka¾dou novou verzí celé zmìnit.</li>
<li>U verzí men¹ích ne¾ 7 je <strong>l¾ivá</strong> dokumentace. Nezapomenu, kdy¾ jsem týden od rána do veèera sedìl u poèítaèe a marnì se sna¾il pou¾ít rotaci nebo poloprùhlednost. V manuálu k DX7 bylo pak pod èarou napsáno: Currently not implemented.</li>
<li>U verzí novìj¹ích ne¾ 7 pro zmìnu chybí podpora 2D grafiky. Tedy i 2D hra potøebuje pro svùj bìh 3D akceleraci, aby se hýbala rychle.</li>
<li>Poslední (a pro mì zásadní, proto¾e pou¾ívám Linux) nevýhoda je dostupnost pouze na Windows. Mù¾e se stát, ¾e jednoho krásného dne opustíte Windows a pøestìhujete se do Linuxu. Hru Kuliè jsem pod Linux pøeportoval za 3 hodiny, ale u Bombièe napsaného v DirectX8 jsem to radìji ani nezkou¹el. Znamenalo by to kompletní pøepsání programu.</li>
</ul>

<p>Mo¾ná výhoda je, ¾e pro DirectX je hodnì tutoriálù. Proè je jich hodnì? Mo¾ná proto, ¾e jsou potøeba, aby to normální programátoøi pochopili.</p>
</i>

<p>Abyste si nemysleli, on tomu fakt rozumí... :-]</p>

<div class="okolo_img"><a href="img/kulic2.png"><img src="img/n_kulic2.png" width="200" height="150" alt="Kuliè 2 - final beta 0.005" /></a><br />Kuliè 2 - final beta 0.005</div>

<p>Linux i Windows verzi Kulièe, vèetnì zdrojových kódù, mo¾no stáhnout na webu Hippo Games.</p>


<h3>Fahrenheit</h3>

<p>Pod tímto pojmem se skrývá projekt Microsoftu a SGI, který by spojil OpenGL a DirectX do jediného nového standardu. Pokud se chcete doèíst nìkolik podrobností o jeho návrhu, odkazuji na <a href="#literatura">[3]</a>. Dùvod, proè o nìm nebudu psát, je ten, ¾e byl ze strany Microsoftu vypovìzen, a to z dùvodu pomalosti vývoje u SGI. Osobnì nedoká¾i posoudit, jestli jsem mìl slovo &quot;vypovìzen&quot; v minulé vìtì blí¾e specifikovat pøíslovci &quot;bohu¾el&quot; nebo &quot;na¹tìstí&quot;.</p>


<h3>Jak se portují programy</h3>

<p>Skonèíme na zaèátku rychlým popisem problémù ohlednì portace poèítaèových her a obecnì jakýchkoli programù na jiné systémy, ne¾ pro které byly primárnì vyvíjeny. Pøipomínám, ¾e díky recenzi UT 2004 defakto vznikl celý tento èlánek.</p>

<p>Obecnì se dá øíci, ¾e pokud na nìco takového, jako je pøenositelnost programu, od samého zaèátku nemyslíte, bývá nejlep¹í cestou ve¹keré portování (ve smyslu slo¾itých úprav zdrojových kódù) ignorovat a zaèít dìlat na úplnì jiném programu, kde s bìhem na více systémech poèítáte od zaèátku.</p>

<p>Po svém pøechodu z Windows na Linux jsem &quot;takovou blbost&quot;, jako je pokus o portaci, zkou¹el u jediného programu, který v¹ak dosud dennì pou¾ívám pøi své práci. Jedná se o textovou aplikaci, které se pøi spu¹tìní do parametrù main() pøedají jména C/C++ souborù a ona je oznaèkuje do HTML. Pøi psaní tutoriálù o programování se nemusíte starat o formátování zdrojových kódù.</p>

<p>Pøesto¾e se jednalo o jednoduchý program skládající se z jediné funkce, muselo se nejprve pøepsat wokenní rozhraní do textu, ale s tím se samozøejmì muselo poèítat. Dále se muselo odbourat rozhraní pøes pamì»ovì mapované soubory (soubor se chová jako obyèejné pole, o naèítání dat, buffery ap. se stará Windows), pøepsat ve¹keré znaky '\' v diskových cestách na '/', pøepsat Windows typy promìnných (DWORD, LPCTSTR...) na céèkovské typy (unsigned int, const char * ...) atd. atd. atd. - práce na dvì hodiny (celý program zabral tøi :-).</p>

<p>Osobnì si portaci jednou napsaného DirectX programu do OpenGL (nemyslím souèasný vývoj), aby mohl být spu¹tìn ve více systémech, naprosto nedoká¾u pøedstavit. A pokud by to u¾ nìjaký hyperaktivní programátor dìlal, urèitì neèekejte, ¾e by po spu¹tìní obì verze vypadaly stejnì. Èím déle na portaci pracujete, tím více zaèínáte ignorovat podrobnosti typu: <i>Power upy nesvítí, kapky de¹tì nejsou 3D a vrhané stíny se nerozmazávají podle vzdálenosti od svìtelného zdroje.</i></p>

<p>Podrobnosti zkrátka pøestanou být podstatné, smysl hry je zachován. Nicménì nazývat to jako lenost programátorù... dalo by se to tak sice øíct, ale fakt nevím. Chtìl bych vidìt, jak by vypadala va¹e verze. Jedno v¹ak vím jistì - paøení her a kritizování jejich programátorù je urèitì jednodu¹¹í...</p>


<h3>Mìjte se...</h3>

<p>Jeliko¾ jsem u¾ napsal o rozdílech mezi OpenGL a Direct3D prakticky v¹echno, èeho jsem schopen, ná¹ seriál pomalu konèí. Proto¾e na rootu èlánky o OpenGL vycházejí dlouhou dobu, tématu grafiky se u¾ vìnovat nebudu, ale mo¾ná, ¾e se zde je¹tì nìkdy potkáme...</p>


<h3>Verze pro tisk</h3>

<p>Podobnì, jako Pavel Ti¹novský dává ke svým OpenGL tutoriálùm verzi pro tisk, uèiním tak i já. Celý seriál vèetnì v¹ech obrázkù v <a href="gl_dx_html.tar.gz">HTML (1,9 MB)</a> a <a href="gl_dx_pdf.tar.gz">PDF (1 MB)</a> verzi.</p>


<a id="literatura"></a>
<h3>Literatura</h3>

<ul>
<li>[0] Vlastní zku¹enosti s 3D grafikou</li>
<li>[1] Clayton Walnum: Programujeme grafiku v Microsoft&reg; Direct3D (9.0), Computer Press 2004, první vydání, 358 stran</li>
<li>[2] Chip 01/2004, Hardwarový fotorealismus: Mo¾nosti moderních 3D grafických akcelerátorù, str. 96-100)</li>
<li>[3] <a href="http://nehe.opengl.cz/cl_gl_referat.pdf" target="_blank">Daniel Èech: OpenGL - Referát na praktikum z informatiky (PDF)</a> - Opravdu kvalitní text</li>
<li>[4] <a href="http://nehe.opengl.cz/cl_sdl_hry.pdf" target="_blank">Bernard Lidický: Nìkolik poznámek k tvorbì poèítaèových her (PDF)</a> - Vìnuje se pøedev¹ím tématùm, jaké hry programovat a v èem (pøenositelné knihovny Allegro a SDL)</li>
<li>[5] <a href="http://www.root.cz/clanek/2314">Linuxové hry (47): Unreal Tournament 2004</a> - Hlavní impuls pro vznik tohoto èlánku</li>
</ul>


<h3>Dal¹í informace o OpenGL a DirectX</h3>

<ul>
<li>Èlánky o OpenGL a spøíznìných technologiích na root.cz</li>
<li>Seriál o DirectX na Chip CD - vychází/vycházel (u¾ neodebírám) hodnì dlouho</li>
<li><a href="http://nehe.opengl.cz/" target="_blank">http://nehe.opengl.cz/</a> - Rozsáhlý server o OpenGL (mùj :-)</li>
<li><a href="http://nehe.gamedev.net/" target="_blank">http://nehe.gamedev.net/</a> - To samé (a spousta vìcí navíc) anglicky</li>
<li><a href="http://www.opengl.org/" target="_blank">http://www.opengl.org/</a> - Domovská stránka OpenGL</li>
<li><a href="http://www.microsoft.com/windows/directx" target="_blank">http://www.microsoft.com/windows/directx</a> - Domovská stránka DirectX</li>
<li><a href="http://www.libsdl.org/" target="_blank">http://www.libsdl.org/</a> - SDL, knihovna pro vývoj pøenositelných her</li>
</ul>

<div>Pro server <a href="http://www.root.cz/">root.cz</a> napsal</div>
<div>Michal Turek - Woq <span class="m">&lt;WOQ (zavináè) seznam.cz&gt;</span></div>

</div><!-- div id="text_stranky" -->

</body>
</html>