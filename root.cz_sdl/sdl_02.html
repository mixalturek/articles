<?xml version="1.0" encoding="iso-8859-2"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="CS">

<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<meta http-equiv="content-language" content="cs" />
<meta name="author" content="all: Michal Turek - Woq; WOQ (zavináè) seznam.cz" />
<style type="text/css" media="all">@import "./data/style.css";</style>
<title>SDL: Hry nejen pro Linux (2)</title>
</head>

<body>

<h1>SDL: Hry nejen pro Linux (2)</h1>

<p class="perex">V druhé èásti série si uká¾eme, jak nainstalovat SDL a dále budou uvedeny &quot;step-by-step&quot; návody na vytvoøení SDL projektù v gcc, MS Visual C++ a Dev-C++.</p>


<h2>Instalace SDL</h2>

<p>Jak u¾ bylo zmínìno na konci minulého dílu, v Linuxových distribucích bývá SDL standardnì pøítomno, ale pravdìpodobnì bude nutné doinstalovat balíèky pro vývoj (devel). U jiných operaèních systémù, pøi po¾adavku nejnovìj¹í verze, èi ruèní kompilaci lze stahovat z <a href="http://www.libsdl.org/download-1.2.php">download stránky</a> webu SDL.</p>

<p>V Linuxu se instalace ze zdrojových kódù provádí klasicky pomocí ./configure; make; make install, ve Windows je nejjednodu¹¹í cestou vzít pøedkompilovanou dynamickou knihovnu SDL.dll a zkopírovat ji buï do adresáøe C:\Windows\System32\, nebo ke ka¾dému vytváøenému projektu zvlá¹». A» u¾ pou¾íváte jakýkoli operaèní systém, nikdy byste nemìli zapomenout pøilo¾it k va¹emu projektu také informaèní soubor README-SDL.txt.</p>


<h2>Ukázkový program</h2>

<p>Vzhledem k tomu, ¾e se pøi vytváøení nového programu zaèíná v¾dy zalo¾ením projektu, budeme tak postupovat i my. Na popis zdrojového kódu se v¹ak vzhledem k místu nedostane, v¹e bude probráno a¾ v následujících dílech.</p>

<p>Velice jednoduchý ukázkový program vytvoøí prázdné okno a poté bude èekat na stisk klávesy ESC, tím se ukonèí. Nic extra efektního, ale alespoò budeme mít kontrolu, ¾e jsme SDL dokázali zprovoznit.</p>

<div class="img"><img src="./data/02_prog.png" width="328" height="269" alt="Screenshot ukázkového programu" /></div>


<h2>gcc</h2>

<p>Pokud je SDL nainstalováno, mìl by jít zdrojový kód zkompilovat napøíklad následovnì</p>

<pre>
$ g++ -o sdl02 sdl_02.cpp `sdl-config --cflags --libs`
</pre>

<p>Vý¹e uvedený pøíkaz sdl-config se nainstaloval automaticky se SDL a slou¾í pøedev¹ím k urèení cest k hlavièkovým souborùm a knihovnám. Pøed vlastním spu¹tìním gcc bude obsah èásti ve zpìtných apostrofech proveden shellem a nahrazen do výsledné formy (na mém systému)</p>

<pre>
$ g++ -o sdl02 sdl_02.cpp -I/usr/include/SDL -D_REENTRANT
-L/usr/lib -lSDL -lpthread
</pre>

<p>Mimochodem, v¹echny volby sdl-config lze získat spu¹tìním bez parametrù</p>

<pre>
$ sdl-config
Usage: sdl-config [--prefix[=DIR]] [--exec-prefix[=DIR]]
[--version] [--cflags] [--libs] [--static-libs]
</pre>


<h2>Visual C++ (6.0)</h2>

<p>Aby IDE vìdìlo, kde má hledat hlavièkové a knihovní (LIB) soubory, je nejprve nutné pøidat v menu Tools -&gt; Options -&gt; Directories absolutní cesty k podadresáøùm include a lib z rozbaleného archivu SDL-devel-1.2.8-VC6.zip.</p>

<p>Dále se vytvoøí nový Win32 Application projekt popø. Win32 Console Application projekt, pokud je po¾adavkem i výstup do konzole. V menu Project -&gt; Settings -&gt; C/C++ -&gt; Code Generation se v listboxu Use run-time library navolí Debug Multithreaded DLL (pro Debug verzi programu) nebo Multithreaded DLL (pro Release verzi programu). Toto se musí vykonat u ka¾dého novì vytváøeného projektu, jinak jeho kód nepùjde zkompilovat.</p>

<p>Zbývá pøilinkovat knihovny SDL.lib a SDLmain.lib, to lze udìlat buï pøes nabídky ve vlastnostech projektu, nebo pøipsáním následujících dvou øádkù ke kódu.</p>

<pre>
#pragma comment (lib, "SDL.lib")
#pragma comment (lib, "SDLmain.lib")
</pre>


<h2>Bloodshed Dev-C++ (4.9.9.1)</h2>

<p>Podobnì jako u Visual C++ je nutné v menu Nástroje -&gt; Nastavení kompilátoru -&gt; Adresáøe nastavit cesty k hlavièkových a knihovním souborùm. Na tomto místì je nutné poznamenat, ¾e devel archiv pro Visual C++ je v Dev-C++ nepou¾itelný, pro nìj slou¾í SDL-devel-1.2.8-mingw32.tar.gz. Dynamická knihovna SDL.dll je u¾ ale samozøejmì spoleèná.</p>

<p>Po vytvoøení konzolového projektu se v menu Projekt -&gt; Vlastnosti projektu -&gt; Parametry pøidají knihovny -lmingw32, -lSDLmain a -lSDL (v tomto poøadí). V pøípadì, ¾e bude na konec seznamu pøidáno i -mwindows, nebude se zároveò s aplikací zobrazovat konzolové okno.</p>


<h2>Jiné operaèní systémy a kompilátory</h2>

<p>K jiným operaèním systémùm ani vývojovým prostøedím nemám bohu¾el v souèasné dobì pøístup. Pokud v nich máte se zprovoznìním SDL problémy, mohl by vám pomoci <a href="http://www.libsdl.org/faq.php">SDL FAQ</a> nebo klasicky <a href="http://www.google.com/">Google</a>. Také mù¾ete zkusit diskuzi ní¾e, tøeba se najde nìkdo chytrý...</p>


<h2>Makefile pro tyto èlánky</h2>

<p>Aby se nemuseli permoníci, co nosí pakety po síti, pøíli¹ namáhat, budou kompletní projekty pro v¹echna testovaná vývojová prostøedí pouze u tohoto èlánku. V pøí¹tích dílech bude pøikládán pouze jednoduchý ruènì psaný Makefile, který mù¾e pøi více souborech se zdrojovými kódy hodnì vìcí zjednodu¹it. Celý program se pak zkompiluje pouze zapsáním jediného make do pøíkazové øádky. Vývojová prostøedí obsahují funkci pøidání souborù do projektu, tak¾e u nich by se nemìly vyskytnou ¾ádné vìt¹í problémy.</p>


<h2>Download</h2>

<p><ul>
<li><a href="http://www.libsdl.org/download-1.2.php">SDL download stránka</a></li>
<li><a href="./src/sdl_02.tar.gz">Ukázkový program a Makefile</a></li>
<li><a href="./src/sdl_02.html">Ukázkový program s obarvenou syntaxí</a></li>
<li><a href="./src/sdl_02_visual_cpp.tar.gz">MS Visual C++ 6.0 projekt</a></li>
<li><a href="./src/sdl_02_dev_cpp.tar.gz">Bloodshed Dev-C++ 4.9.9.1 projekt</a></li>
<li><a href="sdl_02.tar.gz">Offline verze èlánku vèetnì v¹ech pøíloh</a></li>
</ul></p>


<h2>Pokraèování</h2>

<p>Pøí¹tì se v první èásti èlánku seznámíme s konvecemi názvù SDL funkcí a SDL datovými typy a v druhé èásti se koneènì zaèneme vìnovat popisu knihovny z programátorského hlediska.</p>


<div class="autor">Michal Turek - Woq &lt;WOQ (zavináè) seznam.cz&gt;, 09.02.2005</div>

</body>
</html>
